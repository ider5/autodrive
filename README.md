# 自动驾驶仿真系统

这个项目实现了一个基于Pure Pursuit算法的自动驾驶车辆路径跟踪仿真系统，可以控制车辆在特定环境中沿规划好的轨迹行驶。

## 项目结构

- `environment.py`: 环境定义，包括道路、车道和障碍物
- `path_planning.py`: 基于RRT算法的路径规划器
- `vehicle_model.py`: 车辆运动学模型（自行车模型）
- `controller.py`: Pure Pursuit路径跟踪控制器
- `font_support.py`: 支持中文字体显示
- `main.py`: 主程序，协调各组件并运行仿真

## 系统功能

- **环境模拟**: 模拟真实道路环境，包括多车道和静态障碍物
- **路径规划**: 使用RRT算法自动规划从起点到终点的路径
- **路径平滑**: 对规划路径进行平滑处理，使车辆行驶更加平稳
- **Pure Pursuit控制器**: 
  - 采用经典的Pure Pursuit算法进行路径跟踪
  - 包含自适应前瞻距离与速度调整
  - 集成边界避让和安全保护机制
- **可视化**: 实时显示车辆运动、预测轨迹和规划路径

## 安装依赖

项目需要以下Python库：

```bash
pip install numpy matplotlib
```

## 使用方法

1. 确保已安装所有必要的依赖
2. 运行仿真：

```bash
python main.py
```

可选参数：
- `--seed <整数>`: 设置随机种子，确保路径规划结果可重现

## 技术细节

### 路径规划 (RRT)

- **算法**: 快速探索随机树(Rapidly-exploring Random Tree)
- **特点**: 
  - 高效探索复杂环境
  - 支持起点到终点的路径规划
  - 考虑障碍物和安全距离

### 路径平滑

- 多级平滑处理，减少锯齿
- 保证平滑路径依然在道路内并避开障碍物
- 可调节平滑系数

### Pure Pursuit控制器

- **工作原理**: 计算从当前位置到前方"目标点"的曲率，进而计算转向角
- **特点**:
  - 动态前瞻距离: 根据速度自适应调整前瞻距离
  - 曲率自适应速度: 转弯处自动减速
  - 边界避让: 接近道路边界时自动修正
  - 紧急修正: 当检测到碰撞风险时执行紧急避让

### 车辆模型

- 采用自行车运动学模型
- 考虑车辆物理约束：
  - 最大速度和加速度
  - 最大转向角和转向速率
  - 车辆尺寸（长度与宽度）

## 仿真结果

仿真过程会生成以下输出文件：
- `rrt_path_planning.png`: 路径规划结果图
- `simulation_results.png`: 完整仿真结果，包括车辆轨迹和速度曲线
- `vehicle_animation.gif`: 车辆行驶动画

## 自定义

可以通过修改以下文件来自定义仿真：

- `environment.py`: 修改道路环境和障碍物位置
- `controller.py`: 调整Pure Pursuit控制器参数
- `vehicle_model.py`: 修改车辆模型参数
- `path_planning.py`: 优化RRT路径规划算法参数

## 扩展方向

- 添加动态障碍物
- 实现车道变换决策
- 集成其他控制算法如MPC或LQR
- 添加传感器模型和感知模块
- 实现多车协同仿真